/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!function(l){l("#sidebarToggle, #sidebarToggleTop").on("click",function(e){l("body").toggleClass("sidebar-toggled"),l(".sidebar").toggleClass("toggled"),l(".sidebar").hasClass("toggled")&&l(".sidebar .collapse").collapse("hide")}),l(window).resize(function(){l(window).width()<768&&l(".sidebar .collapse").collapse("hide"),l(window).width()<480&&!l(".sidebar").hasClass("toggled")&&(l("body").addClass("sidebar-toggled"),l(".sidebar").addClass("toggled"),l(".sidebar .collapse").collapse("hide"))}),l("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){var t;768<l(window).width()&&(t=(t=e.originalEvent).wheelDelta||-t.detail,this.scrollTop+=30*(t<0?1:-1),e.preventDefault())}),l(document).on("scroll",function(){100<l(this).scrollTop()?l(".scroll-to-top").fadeIn():l(".scroll-to-top").fadeOut()}),l(document).on("click","a.scroll-to-top",function(e){var t=l(this);l("html, body").stop().animate({scrollTop:l(t.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()}),l.fn.inputFilter=function(e){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})},l.fn.serializeObject=function(){var e={},t=this.serializeArray();return l.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};let n=null;const o="https://pridosandbox.com/api",i=(e=!0)=>{let t="";e&&(t=`?_=${Math.floor(999999*Math.random())+1}`),axios.get(o+"/livedraw"+t).then(e=>{console.log("LiveDraw response ->",e);let t=new Date(e.data.data.next),s=t.getTime();l("#local-time-live-draw").text(t.toLocaleString());e=()=>{var e=(new Date).getTime(),t=s-e,a=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.floor(t%36e5/6e4),e=Math.floor(t%6e4/1e3);l("#timer").html(a+"d "+o+"h "+r+"m "+e+"s "),t<0&&(clearInterval(n),l("#timer").html("EXPIRED"),i(!0))};n=setInterval(e,1e3),e()}),clearInterval(n),axios.get(o+"/latest"+t).then(e=>{console.log("Latest response ->",e),l("#latest").html(e.data.data.first.split("").map(e=>`<span class="number">${e}</span>`)),l("#latest-date").html(e.data.data.day)}),axios.get(o+"/config"+t,{headers:{"X-TOGEL-API-KEY":"71f3fb91-9bb4-4711-be40-b76ba9ba5cd1"}}).then(e=>{l("#timepicker").val(e.data.data.hour.padStart(2,"0")+":"+e.data.data.minutes.padStart(2,"0"))}),a.ajax.reload(),r.ajax.reload(),l('[data-toggle="tooltip"]').tooltip()};var a=l("#latest-results").DataTable({ajax:{url:o+"/results/pages/1"},columns:[{data:"day",type:"date",render:e=>`<a data-toggle="tooltip" data-placement="right" title="Local time: ${new Date(e).toDateString()}">${e}</a>`},{data:"first",render:e=>`<strong>${e}</strong>`},{data:"second",render:e=>`<small>${e}</small>`},{data:"third",render:e=>`<small>${e}</small>`}],searching:!1,paging:!1,info:!1,order:[[0,"desc"]]}),r=l("#upcoming-results").DataTable({ajax:{url:o+"/results/upcoming",headers:{"X-TOGEL-API-KEY":"71f3fb91-9bb4-4711-be40-b76ba9ba5cd1"}},columns:[{data:"day",type:"date",render:e=>`<a data-toggle="tooltip" data-placement="right" title="Local time: ${new Date(e).toDateString()}">${e}</a>`},{data:"first",render:e=>`<strong>${e}</strong>`},{data:"second",render:e=>`<small>${e}</small>`},{data:"third",render:e=>`<small>${e}</small>`}],searching:!1,paging:!1,info:!1,order:[[0,"asc"]]});function s(e){l(`input[name='${e}']`).each((e,t)=>{var a=String(Math.floor(Math.random()*(Math.pow(10,6)+1))).padStart(6,0);l(t).val(a)})}l("input[name=day]").datepicker({showButtonPanel:!1,dateFormat:"yy-mm-dd"}),l("#day").datepicker("setDate","today"),l(".number-only").inputFilter(function(e){return/^\d*$/.test(e)}),l("button[data-target]").on("click",function(){s(l(this).data("target"))}),l("#new-entry-form").on("submit",function(e){e.preventDefault(),e.stopPropagation();let t=l(e.currentTarget);e=t.serializeObject();l("#form-loading").show(),l("#form-success").hide(),l("#form-feedback").hide(),axios.post(o+"/results",e,{headers:{"X-TOGEL-API-KEY":"71f3fb91-9bb4-4711-be40-b76ba9ba5cd1"}}).then(e=>{i(!0),l("#form-success").html(`<em class="fas fa-check fa-fw"></em>Created entry for ${e.data.data.day}`).show(),l("#form-loading").hide(),l("#new-entry-form").trigger("reset"),s("consolation"),s("starter")}).catch(e=>{var t;e.response?(l("#form-loading").hide(),(409==(t=e.response.status)?l("#form-feedback").html("Results for this date already exist!"):400<=t&&t<500?l("#form-feedback").html("Incomplete data."):l("#form-feedback").html("Server error, contact developer.")).show()):l("#form-feedback").html(`Error: [${e.message}]. Contact developer.`).show()}).finally(()=>{var e=setInterval(()=>{l("#form-feedback").hide(),l("#form-loading").hide(),clearInterval(e)},5e3)})}),l("#delete-entry-form").on("submit",function(e){e.preventDefault(),e.stopPropagation();let t=l(e.currentTarget);e=t.serializeObject();axios.delete(o+`/results/${e.day}`,{headers:{"X-TOGEL-API-KEY":"71f3fb91-9bb4-4711-be40-b76ba9ba5cd1"}}),i(!0),t.trigger("reset")}),l("#change-config-form").on("submit",function(e){e.preventDefault(),e.stopPropagation();let t=l(e.currentTarget),a=t.serializeObject();e=a.time.split(":").map(e=>parseInt(e)),e={hour:e[0],minutes:e[1]};axios.put(o+"/config",e,{headers:{"X-TOGEL-API-KEY":"71f3fb91-9bb4-4711-be40-b76ba9ba5cd1"}}).then(e=>i(!0))}),s("consolation"),s("starter"),l("#timepicker").timepicker({timeFormat:"H:i"}),i(!0)}(jQuery);